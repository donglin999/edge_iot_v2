# 风险与决策日志（阶段 M1）

## 本阶段核心行动
- [ ] 完成 Django/DRF 项目初始化并提交至仓库。（意见：__________________）
- [ ] 建立配置模型与迁移，覆盖 Site/Device/Point/Task。（意见：__________________）
- [ ] 实现 Excel 导入校验与差异报告。（意见：__________________）
- [ ] 打通 Celery + Redis 调度链路，落地 ModbusTCP Worker。（意见：__________________）
- [ ] 提供任务状态查询接口及 SSE/WebSocket 原型。（意见：__________________）
- [ ] 输出 API 文档与联调说明。（意见：__________________）

> 总体备注：____________________________________________________________________

## 新增风险跟踪

| 编号 | 风险描述                         | 影响                 | 可能性 | 缓解措施                                           | 责任人 | 我的意见 |
| ---- | -------------------------------- | -------------------- | ------ | -------------------------------------------------- | ------ | -------- |
| M1-R1 | Django/DRF 初始化延期           | 推迟后续联调         | 中     | 明确模板仓库/脚手架，提前准备 settings | 待指定 | ________ |
| M1-R2 | Excel 校验规则覆盖不足         | 上线配置仍有风险     | 高     | 与业务确认字段字典，编写单元测试                   | 待指定 | ________ |
| M1-R3 | Celery Worker 与旧进程兼容性   | 采集流程不稳定       | 中     | 先使用 Mock/In-Memory 设备，逐步迁移协议           | 待指定 | ________ |
| M1-R4 | SSE/WebSocket 通道实现复杂度高 | 状态回传不可用       | 中     | 阶段内先使用轮询备选方案，视进度启用 SSE | 待指定 | ________ |
| M1-R5 | Docker 环境构建耗时            | 影响部署验收         | 低     | 提供基础 compose 样例，先在物理机验证               | 待指定 | ________ |

## 待决策事项

| 编号 | 事项                     | 当前建议                                      | 是否待决策 | 我的意见 |
| ---- | ------------------------ | --------------------------------------------- | ---------- | -------- |
| M1-D1 | SSE vs WebSocket 选型    | 先实现 SSE，保留 WebSocket 扩展               | 是         | ____同意____ |
| M1-D2 | Excel 导入审批流程      | M1 阶段使用单人确认，后续支持多人审批         | 是         | ____不需要审批流程____ |
| M1-D3 | 配置数据库选型          | 开发用 SQLite，生产切换 PostgreSQL            | 是         | ___直接一直使用SQlite_____ |
| M1-D4 | InfluxDB 模拟环境搭建方式 | 使用 Docker 容器提供 Mock；若不可行则本地脚本 | 是         | _____不额外用docker提供mock，直接本地脚本___ |
| M1-D5 | 外部告警平台            | 延续 M0，暂不接入                              | 否         | 同意 |

## 决策记录（填充后请更新状态）

| 编号 | 决策内容               | 背景                     | 日期 | 状态       | 我的备注 |
| ---- | ---------------------- | ------------------------ | ---- | ---------- | -------- |
| M1-D1 | SSE/WebSocket 方案    | 关系到前端实现复杂度     | 待定 | 【待确认】 | ________ |
| M1-D2 | Excel 审批策略        | 影响上线节奏             | 待定 | 【待确认】 | ________ |
| M1-D3 | 配置数据库切换策略    | 数据持久与部署成本       | 待定 | 【待确认】 | ________ |
| M1-D4 | InfluxDB 模拟部署方式 | 本地开发及自动化测试需求 | 待定 | 【待确认】 | ________ |
