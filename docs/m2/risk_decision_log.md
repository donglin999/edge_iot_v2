# 风险与决策日志（阶段 M2）

## 本阶段核心行动

| 编号 | 行动项 | 是否执行 | 我的意见 |
|------|--------|---------|---------|
| M2-A1 | 完成前端核心页面（仪表盘、测点查询、配置管理） | | |不执行
| M2-A2 | 接入 JWT 身份认证与角色权限管理 | | |
| M2-A3 | 实现 SSE 实时状态推送 | | |
| M2-A4 | 集成数据可视化组件（ECharts） | | |
| M2-A5 | 完成前后端联调与集成测试 | | |
| M2-A6 | 输出用户使用手册与 API 文档 | | |

> 总体备注：____________________________________________________________________

---

## 新增风险跟踪

| 编号 | 风险描述 | 影响 | 可能性 | 缓解措施 | 责任人 | 是否执行 | 我的意见 |
|------|---------|------|--------|---------|--------|---------|---------|
| M2-R1 | 前端开发进度延期 | M2 整体延期 | 中 | 优先实现核心功能，低优先级功能可后移至 M3 | | | |
| M2-R2 | SSE 连接稳定性问题 | 实时推送不可用 | 中 | 实现心跳检测、自动重连机制；准备降级方案（轮询） | | | |
| M2-R3 | ECharts 性能问题（大数据量） | 页面卡顿 | 中 | 实现数据降采样、分页加载；限制单次查询数据量 | | | |
| M2-R4 | JWT Token 安全性不足 | 安全漏洞 | 低 | 设置合理过期时间、使用 HTTPS、实现 Refresh Token | | | |
| M2-R5 | 前后端接口契约不一致 | 联调阻塞 | 中 | 使用 TypeScript 生成类型定义、自动化接口测试 | | | |
| M2-R6 | InfluxDB 查询性能慢 | 数据加载超时 | 中 | 优化查询语句、添加索引、实现查询缓存 | | | |
| M2-R7 | 用户权限模型复杂度超预期 | 开发时间增加 | 低 | 先实现基础角色权限，细粒度权限后续迭代 | | | |不执行
| M2-R8 | 前端测试覆盖率不足 | 质量风险 | 中 | 优先测试核心流程，非核心功能可手动测试 | | | |

---

## 待决策事项

| 编号 | 事项 | 当前建议 | 是否待决策 | 是否执行 | 我的意见 |
|------|------|---------|-----------|---------|---------|
| M2-D1 | 前端 UI 组件库选型 | Ant Design（企业级、组件丰富） | 是 | | |
| M2-D2 | 实时通信方案 | SSE（实现简单、适合单向推送） | 是 | | |
| M2-D3 | 数据可视化库选型 | ECharts（功能强大、中文文档好） | 是 | | |
| M2-D4 | 是否实现 WebSocket | 不实现（SSE 足够，可后续补充） | 是 | | |
| M2-D5 | 权限粒度 | 先实现页面级权限，字段级权限后续考虑 | 是 | | |不执行
| M2-D6 | 是否实现用户管理页面 | 暂不实现，手动管理用户（降低 M2 工作量） | 是 | | |
| M2-D7 | 前端测试策略 | 核心流程写 E2E 测试，组件写单元测试 | 是 | | |
| M2-D8 | 数据导出功能 | 不实现（优先级低，可后续补充） | 是 | | |
| M2-D9 | 响应式布局 | 暂不做移动端适配，专注桌面端 | 是 | | |
| M2-D10 | 告警规则定义 | 先实现简单阈值告警，复杂规则后续迭代 | 是 | | |

---

## 决策记录（填充后请更新状态）

| 编号 | 决策内容 | 背景 | 日期 | 状态 | 是否执行 | 我的备注 |
|------|---------|------|------|------|---------|---------|
| M2-D1 | UI 组件库选型 | 影响开发效率与体验 | 待定 | 【待确认】 | | |
| M2-D2 | 实时通信方案 | 关系到系统实时性 | 待定 | 【待确认】 | | |
| M2-D3 | 数据可视化库 | 影响图表展示效果 | 待定 | 【待确认】 | | |
| M2-D4 | WebSocket 实现 | 影响开发工作量 | 待定 | 【待确认】 | | |
| M2-D5 | 权限粒度策略 | 影响安全性与复杂度 | 待定 | 【待确认】 | | | 不执行
| M2-D6 | 用户管理页面 | 影响 M2 工作量 | 待定 | 【待确认】 | | |不执行
| M2-D7 | 测试策略 | 影响质量保证 | 待定 | 【待确认】 | | |
| M2-D8 | 数据导出功能 | 影响用户体验 | 待定 | 【待确认】 | | |
| M2-D9 | 响应式布局 | 影响设备兼容性 | 待定 | 【待确认】 | | |
| M2-D10 | 告警规则定义 | 影响监控能力 | 待定 | 【待确认】 | | |

---

## 技术研究清单

| 编号 | 研究主题 | 目的 | 负责人 | 截止日期 | 是否执行 | 研究结论 |
|------|---------|------|--------|---------|---------|---------|
| M2-T1 | djangorestframework-simplejwt 最佳实践 | 确保 JWT 认证实现正确 | | | | |  不执行
| M2-T2 | Django SSE 实现方案调研 | 选择合适的 SSE 库或自实现 | | | | |
| M2-T3 | ECharts 大数据量优化方案 | 处理万级以上数据点 | | | | |
| M2-T4 | InfluxDB 查询优化技巧 | 提升数据查询性能 | | | | |
| M2-T5 | React SSE 客户端实现 | 确保稳定的事件订阅 | | | | |
| M2-T6 | Playwright 测试框架学习 | 编写高质量 E2E 测试 | | | | |

---

## 约束与假设（继承 M1）

### 约束
- 前端必须支持 Chrome、Edge、Firefox 最新版本。
- 数据可视化至少支持 10000 个数据点流畅渲染。
- 页面首次加载时间 < 3 秒（正常网络环境）。
- API 响应时间 < 500ms（90 分位）。

### 假设
- 用户主要在桌面端使用，移动端访问量低。
- 单个用户同时打开的连接数 < 5。
- InfluxDB 查询响应时间 < 1 秒（中等数据量）。
- 告警频率 < 10 次/分钟。

---

## 备注区

（请在此记录额外说明、变更历史等）

____________________________________________________________________
____________________________________________________________________
____________________________________________________________________
