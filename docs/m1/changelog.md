# M1 开发记录\n
\n## 2025-10-06
- 扩展 Excel 导入接口，支持 ile_path/site_code 参数并生成导入作业摘要。
- 优化导入落库逻辑：幂等更新连接与测点，空值清洗，生成配置版本快照。
- 新增自动化测试 configuration/tests/test_import_workflow.py 覆盖校验与写库流程。\n
\n### 前端基础（2025-10-06）\n- 初始化 React + Vite 项目骨架（rontend/），配置 TypeScript、ESLint 与代理。\n- 实现三大页面：任务总览、连接/测点列表及导入作业界面，调用现有后端 API。\n- 添加基础样式、路由与 API 交互逻辑，为后续联调做准备。\n
- 使用 Node.js/npm 完成前端依赖安装并执行 
pm run build 验证打包流程。\n
- 更新导入接口：支持文件上传，持久化到 uploads/import_jobs，并改造后端 API/前端表单（拖拽+点击上传）。\n- 优化 Excel 导入落库逻辑：处理空值、幂等写入、JSON 字段清洗。\n- 新增 API 测试覆盖文件上传流程，
pm run build 验证前端最新代码。\n
- 修正任务/连接接口按站点去重（仅展示 default 站点的 6 条记录），并更新前端调用参数。\n- 前端导入页改为文件上传（支持拖拽），成功写库后默认刷新默认站点。\n- 保持 
pm run build、后端测试通过，确保联调一致。\n
- 新增 /api/config/import-jobs/{id}/diff/ 接口返回与现有配置的差异，并存储上传文件元数据。\n- API 任务总览/连接查询按站点去重；前端同步携带 site_code=default，展示正确的 6 条连接与任务。\n- 导入页仅需上传文件（拖拽/点击），无触发人/站点输入；新增后端 diff 自动化测试。\n
- 增加任务启停接口及前端控制按钮，配套保存运行实例。\n- 新增导入差异 /diff/ 接口，前端展示导入结果与差异统计。\n- 导入成功后自动获取差异详情；前端任务总览/连接请求按站点去重刷新。\n- 后端/前端测试与 
pm run build 通过。\n
